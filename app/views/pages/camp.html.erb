<% photo = @camp.photo %>
<div class="banner-detail" style="background-image: linear-gradient(-225deg, rgba(0,101,168,0.6) 0%, rgba(0,36,61,0.6) 50%), url('<%= photo %>');">
  <div class="banner-content">
    <h1><%= @camp.title %></h1>
  </div>
</div>

<div class="btn btn-info"><i class="fa fa-chevron-left" aria-hidden="true"></i><%= link_to ' Back to My Camps ', user_path(current_user) %></div>
<div class="container">

   <h1><%= @camp.title %></h1>

    <div class="description-look">Adresse: <%= @camp.address %></div>
    <div class="description-look">Description: <%= @camp.description %></div>

    <div class="price-look"><%= @camp.price %>$</div>


<div class="book-recap">
<h3>Bookings for your surf camp</h3>
<br>
<% @camp.bookings.each do |booking| %>
<ul>
  <li>
    <%= booking.start_date.strftime('%d/%m/%Y') %> -
    <%= booking.end_date.strftime('%d/%m/%Y') %> -
    <%= booking.surfers %> surfers
    <%=  %>
    <%= link_to "Confirm Booking", my_camp_path(@camp, booking: { id: booking.id, accepted: true }), method: :put %>
  </li>
</ul>
<% end %>


<%= link_to 'Edit your Camp', edit_camp_path, class: "btn btn-primary" %>
<%= link_to 'Delete your Camp', camp_path, method: :delete,  data: { confirm: "Are you sure you want to delete this camp?" }, class: "btn btn-danger" %>
</div>
</div>



<div class="container detail-intro">
  <div class="row">
    <div class= "col-sm-9 col-xs-12 camp-summary">
      <h1><%= @camp.title %></h1>
      <div class="description-look"> <%= @camp.address %></div>
   </div>

   <div class= "col-sm-3 col-xs-12 price-box-container">
    <div class="price-look text-center"><%= @camp.price %>$</div>
    <!-- Button trigger modal -->
    <div class="cta-book text-center">

    <br>
    </div>
  </div>
  <br>
<!-- Description -->
<div class="container description-camp">
  <div class="row">
    <div class="col-xs-12">
      <h3>Description:</h3>
      <p><%= @camp.description %></p>
    </div>
  </div>
</div>
<!-- Reviews -->
<div class="container reviews-camp">
  <div class="row">
    <div class="col-md-12">
      <h3>Reviews:</h3>
      <% @camp.reviews.each do |review| %>
      <div class="review">
        <div class='avatar-review'>
        <%= image_tag(review.user.photo, class: "avatar-review") %>
        </div>
        <div class='review-body'>
          <h3><%= review.title %></h3>
          <p><%= review.description %></p>
        </div>
        <ul class="list-inline product-controls hidden-sm hidden-xs">
          <% review.rating.times do %>
              <i class="fa fa-star" style="color: #ffb400"></i>
            <% end %>
            <% (5 - review.rating).times do %>
             <i class="fa fa-star" style="color: gray"></i>
            <% end %>
        </ul>
      </div>
      <% end %>
    </div>
  </div>
</div>

<div id="map" style="width: 100%; height: 400px;"></div>

<div class="btn btn-info"><i class="fa fa-chevron-left" aria-hidden="true"></i><%= link_to ' Back to the camps list', camps_path %></div>

<!-- Js mapping -->
<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    $(document).ready(function() {
      var handler = Gmaps.build('Google');
      handler.buildMap({
      provider: {
          scrollwheel: false, zoomControl: false,
          styles:
          [{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#F78AE0"}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#E0FCFF"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":-100},{"lightness":45}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#46bcec"},{"visibility":"on"}]}]
          },
        internal: { id: 'map' } }, function() {
        markers = handler.addMarkers(<%= raw @hash.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
        if (markers.length == 0) {
          handler.getMap().setZoom(2);
        } else if (markers.length == 1) {
          handler.getMap().setZoom(12);
        }
      });
    });
  <% end %>
<% end %>


